{"version":3,"file":"index.js","sources":["../../src/popup/main.ts"],"sourcesContent":["import { getStorage, clearStorage } from \"../shared/storage\";\nimport { log } from \"../shared/log\";\n\nconst statusEl = document.getElementById(\"status\") as HTMLDivElement | null;\nconst clearButton = document.getElementById(\"clear\") as HTMLButtonElement | null;\n\nconst renderStatus = async () => {\n  if (!statusEl) return;\n\n  const state = await getStorage();\n  if (!state.letterboxdExport) {\n    statusEl.textContent = \"No Letterboxd export loaded.\";\n    return;\n  }\n\n  statusEl.textContent = `Loaded ${state.letterboxdExport.films.length} films.`;\n};\n\nclearButton?.addEventListener(\"click\", async () => {\n  await clearStorage();\n  await renderStatus();\n  log(\"Export cleared via popup\");\n});\n\nrenderStatus().catch((err) => {\n  if (statusEl) statusEl.textContent = \"Failed to read storage.\";\n  log(\"Popup render failed\", err);\n});\n"],"names":["statusEl","clearButton","renderStatus","state","getStorage","clearStorage","err"],"mappings":"+vBAGA,MAAMA,EAAW,SAAS,eAAe,QAAQ,EAC3CC,EAAc,SAAS,eAAe,OAAO,EAE7CC,EAAe,SAAY,CAC/B,GAAI,CAACF,EAAU,OAEf,MAAMG,EAAQ,MAAMC,EAAA,EACpB,GAAI,CAACD,EAAM,iBAAkB,CAC3BH,EAAS,YAAc,+BACvB,MACF,CAEAA,EAAS,YAAc,UAAUG,EAAM,iBAAiB,MAAM,MAAM,SACtE,EAEAF,GAAA,MAAAA,EAAa,iBAAiB,QAAS,SAAY,CACjD,MAAMI,EAAA,EACN,MAAMH,EAAA,CAER,GAEAA,IAAe,MAAOI,GAAQ,CACxBN,MAAmB,YAAc,0BAEvC,CAAC"}