{"version":3,"file":"index.js","sources":["../../src/content/index.ts"],"sourcesContent":["import { log } from \"../shared/log\";\nimport { getStorage } from \"../shared/storage\";\n\nconst ROOT_ID = \"nxlb-shadow-root\";\n\nconst mountOverlay = () => {\n  if (document.getElementById(ROOT_ID)) {\n    log(\"Overlay already mounted\");\n    return;\n  }\n\n  const host = document.createElement(\"div\");\n  host.id = ROOT_ID;\n  host.style.position = \"fixed\";\n  host.style.top = \"16px\";\n  host.style.right = \"16px\";\n  host.style.zIndex = \"2147483647\";\n\n  const shadow = host.attachShadow({ mode: \"open\" });\n\n  const style = document.createElement(\"style\");\n  style.textContent = `\n    :host {\n      all: initial;\n      font-family: \"Space Grotesk\", sans-serif;\n    }\n    .panel {\n      background: rgba(12, 12, 12, 0.9);\n      color: #f5f5f5;\n      border-radius: 12px;\n      padding: 12px 14px;\n      min-width: 220px;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);\n      border: 1px solid rgba(255, 255, 255, 0.08);\n    }\n    .title {\n      font-size: 13px;\n      letter-spacing: 0.08em;\n      text-transform: uppercase;\n      margin-bottom: 8px;\n      opacity: 0.7;\n    }\n    .status {\n      font-size: 14px;\n      line-height: 1.4;\n    }\n  `;\n\n  const panel = document.createElement(\"div\");\n  panel.className = \"panel\";\n\n  const title = document.createElement(\"div\");\n  title.className = \"title\";\n  title.textContent = \"Letterboxd\";\n\n  const status = document.createElement(\"div\");\n  status.className = \"status\";\n  status.textContent = \"Loading export status...\";\n\n  panel.appendChild(title);\n  panel.appendChild(status);\n  shadow.appendChild(style);\n  shadow.appendChild(panel);\n\n  document.documentElement.appendChild(host);\n\n  getStorage()\n    .then((state) => {\n      if (!state.letterboxdExport) {\n        status.textContent = \"No export loaded yet.\";\n        return;\n      }\n      status.textContent = `Export loaded: ${state.letterboxdExport.films.length} films.`;\n    })\n    .catch((err) => {\n      status.textContent = \"Failed to read storage.\";\n      log(\"Storage read failed\", err);\n    });\n\n  log(\"Overlay mounted\");\n};\n\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", mountOverlay, { once: true });\n} else {\n  mountOverlay();\n}\n"],"names":["ROOT_ID","mountOverlay","host","shadow","style","panel","title","status","getStorage","state","err"],"mappings":"kDAGA,MAAMA,EAAU,mBAEVC,EAAe,IAAM,CACzB,GAAI,SAAS,eAAeD,CAAO,EAEjC,OAGF,MAAME,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,GAAKF,EACVE,EAAK,MAAM,SAAW,QACtBA,EAAK,MAAM,IAAM,OACjBA,EAAK,MAAM,MAAQ,OACnBA,EAAK,MAAM,OAAS,aAEpB,MAAMC,EAASD,EAAK,aAAa,CAAE,KAAM,OAAQ,EAE3CE,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA2BpB,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,QAElB,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,UAAY,QAClBA,EAAM,YAAc,aAEpB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,SACnBA,EAAO,YAAc,2BAErBF,EAAM,YAAYC,CAAK,EACvBD,EAAM,YAAYE,CAAM,EACxBJ,EAAO,YAAYC,CAAK,EACxBD,EAAO,YAAYE,CAAK,EAExB,SAAS,gBAAgB,YAAYH,CAAI,EAEzCM,EAAA,EACG,KAAMC,GAAU,CACf,GAAI,CAACA,EAAM,iBAAkB,CAC3BF,EAAO,YAAc,wBACrB,MACF,CACAA,EAAO,YAAc,kBAAkBE,EAAM,iBAAiB,MAAM,MAAM,SAC5E,CAAC,EACA,MAAOC,GAAQ,CACdH,EAAO,YAAc,yBAEvB,CAAC,CAGL,EAEI,SAAS,aAAe,UAC1B,SAAS,iBAAiB,mBAAoBN,EAAc,CAAE,KAAM,GAAM,EAE1EA,EAAA"}